import {
  Companion_instance2oawqq9qiaris as Companion_instance,
  primitiveArrayConcatwxgknw08pmlb as primitiveArrayConcat,
  _Result___init__impl__xyqfz83hut4nr3dfvi3 as _Result___init__impl__xyqfz8,
  createFailure8paxfkfa5dc7 as createFailure,
  Result__exceptionOrNull_impl_p6xea9ty3elzpd9eo3 as Result__exceptionOrNull_impl_p6xea9,
  VOID3gxj6tk5isa35 as VOID,
  Unit_instance1fbcbse1fwigr as Unit_instance,
  equalsLong28bsrfhwvd686 as equalsLong,
  contentEquals1cdp6c846cfdi as contentEquals,
  _Result___get_value__impl__bjfvqg2ei4op8d4d2m as _Result___get_value__impl__bjfvqg,
  THROW_CCE2g6jy02ryeudk as THROW_CCE,
  hexToByteArrayj26yk4970vc7 as hexToByteArray,
  initMetadataForClassbxx6q50dy2s7 as initMetadataForClass,
  get_COROUTINE_SUSPENDED3ujt3p13qm4iy as get_COROUTINE_SUSPENDED,
  Result3t1vadv16kmzk as Result,
  _Result___get_isSuccess__impl__sndoy82stztr6y6gdne as _Result___get_isSuccess__impl__sndoy8,
  createThis2j2avj17cvnv2 as createThis,
  suspendOrReturn49pspzlx5djv as suspendOrReturn,
  AutoCloseable1l5p57f9lp7kv as AutoCloseable,
  captureStack1fzi4aczwc4hg as captureStack,
  toString30pk9tzaqopn as toString,
  getStringHashCode26igk1bx568vk as getStringHashCode,
  hashCodeq5arwsb9dgti as hashCode,
  equals2au1ep9vhcato as equals,
  Exceptiondt2hlxn7j7vw as Exception,
  Enum3alwj03lh1n41 as Enum,
  initMetadataForObject1cxne3s9w65el as initMetadataForObject,
  noWhenBranchMatchedException2a6r7ubxgky5j as noWhenBranchMatchedException,
  IllegalArgumentException2asla15b5jaob as IllegalArgumentException,
  toString1pkumu07cwy4m as toString_0,
  initMetadataForCompanion1wyw17z38v6ac as initMetadataForCompanion,
  downTo39qhfeycepm1j as downTo,
  until1jbpn0z3f8lbg as until,
  Long2qws0ah9gnpki as Long,
  bitwiseAnd2g7wmsfd45l12 as bitwiseAnd,
  convertToByte1epqhkuyxuz5a as convertToByte,
  shiftRight2cr6y79ufiihy as shiftRight,
  getKClass3t8tygqu4lcxf as getKClass,
  arrayOf1akklvh2at202 as arrayOf,
  createKType31ecntyyaay3k as createKType,
  CancellationException3b36o9qz53rgr as CancellationException,
  protoOf180f3jzyo7rfj as protoOf,
  toHexString5bhtjxqec7ow as toHexString,
  charSequenceLength3278n89t01tmv as charSequenceLength,
  Regexxgw0gjiagf4z as Regex,
  KProperty1ca4yb4wlo496 as KProperty1,
  getPropertyCallableRef3hckxc0xueiaj as getPropertyCallableRef,
  compare2uud5j30pw5xc as compare,
  lazy2hsh8ze7j6ikd as lazy,
  to2cs3ny02qtbcb as to,
  plus2lr02ok6jhhxu as plus,
  emptyMapr06gerzljqtm as emptyMap,
  getNumberHashCode2l4nbdcihl25f as getNumberHashCode,
  throwOnFailure24snjmtlqgzo8 as throwOnFailure,
  toNumberlmbpvqo27r53 as toNumber,
  numberToLong345n6tb1n1i71 as numberToLong,
  isInterface3d6p8outrmvmk as isInterface,
  initMetadataForLambda3af3he42mmnh as initMetadataForLambda,
  NotImplementedErrorfzlkpv14xxr8 as NotImplementedError,
} from './kotlin-kotlin-stdlib.mjs';
import {
  HttpClient3584jcajl7sef as HttpClient,
  HttpRequestBuilder15f2nnx9sjuv1 as HttpRequestBuilder,
  url2l6iw5ri21nxb as url,
  HttpStatement3zxb33q8lku as HttpStatement,
  ServerResponseException340iruvt5onmi as ServerResponseException,
  get_request3dwcif5y0fvf1 as get_request,
  ClientRequestExceptionj69ilxf38oeq as ClientRequestException,
  get_UserAgent1tqbmdxoguusg as get_UserAgent,
  get_HttpTimeout3mcrbvfnvmyx2 as get_HttpTimeout,
} from './ktor-ktor-client-core.mjs';
import {
  Companion_getInstance1p3cpld7r1jz3 as Companion_getInstance,
  Companion_getInstanceud97dyzf471m as Companion_getInstance_0,
} from './ktor-ktor-http.mjs';
import { TypeInfo2nbxsuf4v8os2 as TypeInfo } from './ktor-ktor-utils.mjs';
import { IOException1wyutdmfe71nu as IOException } from './kotlinx-io-kotlinx-io-core.mjs';
import { JsonConvertExceptiongnc5x6xwaf77 as JsonConvertException } from './ktor-ktor-serialization.mjs';
import {
  SerializationExceptioneqrdve3ts2n9 as SerializationException,
  PluginGeneratedSerialDescriptorqdzeg5asqhfg as PluginGeneratedSerialDescriptor,
  UnknownFieldExceptiona60e3a6v1xqo as UnknownFieldException,
  StringSerializer_getInstance2wffkbpdux3h9 as StringSerializer_getInstance,
  LongSerializer_getInstance194e4t3ow5wjs as LongSerializer_getInstance,
  typeParametersSerializers2likxjr48tr7y as typeParametersSerializers,
  GeneratedSerializer1f7t7hssdd2ws as GeneratedSerializer,
  throwMissingFieldException2cmke0v3ynf14 as throwMissingFieldException,
  get_nullable197rfua9r7fsz as get_nullable,
} from './kotlinx-serialization-kotlinx-serialization-core.mjs';
import { get_ContentNegotiationcp59ye9rorjc as get_ContentNegotiation } from './ktor-ktor-client-content-negotiation.mjs';
import { Jsonsmkyu9xjl7fv as Json } from './kotlinx-serialization-kotlinx-serialization-json.mjs';
import { jsonu6qnfo3b405p as json } from './ktor-ktor-serialization-kotlinx-json.mjs';
import {
  Mutex16li1l0asjv17 as Mutex,
  CoroutineScopefcb5f5dwqcas as CoroutineScope,
  GlobalScope_instance1sfulufhd2ijt as GlobalScope_instance,
  promise1ky6tawqaxbt4 as promise,
} from './kotlinx-coroutines-core.mjs';
import * as Sha256Module from '@noble/hashes/sha2.js';
import * as Keccak256Module from '@noble/hashes/sha3.js';
import * as Bls12381Module from '@noble/curves/bls12-381.js';
import './ktor-ktor-client-core.mjs';
//region block: imports
var imul = Math.imul;
//endregion
//region block: pre-declaration
class BeaconVerificationService {
  x3o(chainInfo, beacon, expectedRound) {
    // Inline function 'kotlin.onFailure' call
    var this_0 = beacon.y3o();
    var tmp0_safe_receiver = Result__exceptionOrNull_impl_p6xea9(this_0);
    if (tmp0_safe_receiver == null)
      null;
    else {
      // Inline function 'kotlin.let' call
      // Inline function 'kotlin.Companion.failure' call
      var exception = InvalidBeacon.l3p(chainInfo.f3p_1, beacon.m3o_1, VOID, tmp0_safe_receiver);
      return _Result___init__impl__xyqfz8(createFailure(exception));
    }
    // Inline function 'kotlin.onFailure' call
    var this_1 = this.m3p(beacon, expectedRound);
    var tmp0_safe_receiver_0 = Result__exceptionOrNull_impl_p6xea9(this_1);
    if (tmp0_safe_receiver_0 == null)
      null;
    else {
      // Inline function 'kotlin.let' call
      // Inline function 'kotlin.Companion.failure' call
      return _Result___init__impl__xyqfz8(createFailure(tmp0_safe_receiver_0));
    }
    // Inline function 'kotlin.onFailure' call
    var this_2 = this.n3p(beacon);
    var tmp0_safe_receiver_1 = Result__exceptionOrNull_impl_p6xea9(this_2);
    if (tmp0_safe_receiver_1 == null)
      null;
    else {
      // Inline function 'kotlin.let' call
      // Inline function 'kotlin.Companion.failure' call
      return _Result___init__impl__xyqfz8(createFailure(tmp0_safe_receiver_1));
    }
    return this.o3p(beacon, chainInfo);
  }
  m3p(beacon, expectedRound) {
    var tmp;
    if (equalsLong(beacon.m3o_1, expectedRound)) {
      // Inline function 'kotlin.Companion.success' call
      tmp = _Result___init__impl__xyqfz8(beacon);
    } else {
      // Inline function 'kotlin.Companion.failure' call
      var exception = VerificationFailed.t3p('Beacon round does not match expected round ' + expectedRound.toString(), VOID, beacon.m3o_1);
      tmp = _Result___init__impl__xyqfz8(createFailure(exception));
    }
    return tmp;
  }
  n3p(beacon) {
    var hashedSignature = sha256(beacon.u3p());
    var tmp;
    if (contentEquals(hashedSignature, beacon.v3p())) {
      // Inline function 'kotlin.Companion.success' call
      tmp = _Result___init__impl__xyqfz8(beacon);
    } else {
      // Inline function 'kotlin.Companion.failure' call
      var exception = VerificationFailed.t3p('Beacon randomness does not match signature hash', VOID, beacon.m3o_1);
      tmp = _Result___init__impl__xyqfz8(createFailure(exception));
    }
    return tmp;
  }
  o3p(beacon, chainInfo) {
    var tmp0_elvis_lhs = Companion_instance_0.w3p(chainInfo.e3p_1);
    var tmp;
    if (tmp0_elvis_lhs == null) {
      // Inline function 'kotlin.Companion.failure' call
      var exception = VerificationFailed.t3p('Unsupported scheme: ' + chainInfo.e3p_1, VOID, beacon.m3o_1);
      return _Result___init__impl__xyqfz8(createFailure(exception));
    } else {
      tmp = tmp0_elvis_lhs;
    }
    var scheme = tmp;
    // Inline function 'kotlin.getOrElse' call
    var this_0 = digestBeacon(this, beacon, scheme);
    var exception_0 = Result__exceptionOrNull_impl_p6xea9(this_0);
    var tmp_0;
    if (exception_0 == null) {
      var tmp_1 = _Result___get_value__impl__bjfvqg(this_0);
      tmp_0 = (tmp_1 == null ? true : !(tmp_1 == null)) ? tmp_1 : THROW_CCE();
    } else {
      var tmp0_message = 'Failed to compute beacon digest: ' + exception_0.message;
      var tmp1_beaconRound = beacon.m3o_1;
      // Inline function 'kotlin.Companion.failure' call
      var exception_1 = VerificationFailed.t3p(tmp0_message, exception_0, tmp1_beaconRound);
      return _Result___init__impl__xyqfz8(createFailure(exception_1));
    }
    var message = tmp_0;
    // Inline function 'kotlin.getOrElse' call
    var this_1 = scheme.x3p(hexToByteArray(chainInfo.z3o_1), message, beacon.u3p());
    var exception_2 = Result__exceptionOrNull_impl_p6xea9(this_1);
    var tmp_2;
    if (exception_2 == null) {
      var tmp_3 = _Result___get_value__impl__bjfvqg(this_1);
      tmp_2 = (tmp_3 == null ? true : !(tmp_3 == null)) ? tmp_3 : THROW_CCE();
    } else {
      var tmp0_message_0 = 'Signature verification error: ' + exception_2.message;
      var tmp1_beaconRound_0 = beacon.m3o_1;
      // Inline function 'kotlin.Companion.failure' call
      var exception_3 = VerificationFailed.t3p(tmp0_message_0, exception_2, tmp1_beaconRound_0);
      return _Result___init__impl__xyqfz8(createFailure(exception_3));
    }
    var isValid = tmp_2;
    var tmp_4;
    if (isValid) {
      // Inline function 'kotlin.Companion.success' call
      tmp_4 = _Result___init__impl__xyqfz8(beacon);
    } else {
      // Inline function 'kotlin.Companion.failure' call
      var exception_4 = VerificationFailed.t3p('Invalid signature for round ' + beacon.m3o_1.toString(), VOID, beacon.m3o_1);
      tmp_4 = _Result___init__impl__xyqfz8(createFailure(exception_4));
    }
    return tmp_4;
  }
}
class DrandClient {
  static j3q(api, cache, verifier) {
    cache = cache === VOID ? new Cache() : cache;
    verifier = verifier === VOID ? new BeaconVerificationService() : verifier;
    var $this = createThis(this);
    $this.y3p_1 = api;
    $this.z3p_1 = cache;
    $this.a3q_1 = verifier;
    return $this;
  }
  static k3q(baseUrl) {
    baseUrl = baseUrl === VOID ? 'https://api.drand.sh' : baseUrl;
    return this.j3q(new DrandHttpApi(baseUrl));
  }
  l3q(beaconId, round, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_getVerifiedBeacon__6uekoe.bind(VOID, this, beaconId, round), $completion);
  }
  m3q(beaconId, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_getVerifiedLatestBeacon__wywytn.bind(VOID, this, beaconId), $completion);
  }
  b3q(beaconId, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_getChainInfo__qbfrv3.bind(VOID, this, beaconId), $completion);
  }
  z4() {
    return this.y3p_1.z4();
  }
}
class DrandError extends Exception {
  static t3q(message, cause) {
    cause = cause === VOID ? null : cause;
    var $this = this.mc(message, cause);
    captureStack($this, $this.s3q_1);
    return $this;
  }
}
class NotFound extends DrandError {
  static q3q(message, cause) {
    message = message === VOID ? 'Resource not found' : message;
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.p3q_1);
    return $this;
  }
}
class InvalidRequest extends DrandError {
  static z3q(message, cause) {
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.y3q_1);
    $this.w3q_1 = message;
    $this.x3q_1 = cause;
    delete $this.message;
    delete $this.cause;
    return $this;
  }
  j() {
    return this.w3q_1;
  }
  k() {
    return this.x3q_1;
  }
  toString() {
    return 'InvalidRequest(message=' + this.w3q_1 + ', cause=' + toString(this.x3q_1) + ')';
  }
  hashCode() {
    var result = getStringHashCode(this.w3q_1);
    result = imul(result, 31) + (this.x3q_1 == null ? 0 : hashCode(this.x3q_1)) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof InvalidRequest))
      return false;
    if (!(this.w3q_1 === other.w3q_1))
      return false;
    if (!equals(this.x3q_1, other.x3q_1))
      return false;
    return true;
  }
  get message() {
    return this.j();
  }
  get cause() {
    return this.k();
  }
}
class RateLimited extends DrandError {
  static f3r(message, cause) {
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.e3r_1);
    $this.c3r_1 = message;
    $this.d3r_1 = cause;
    delete $this.message;
    delete $this.cause;
    return $this;
  }
  j() {
    return this.c3r_1;
  }
  k() {
    return this.d3r_1;
  }
  toString() {
    return 'RateLimited(message=' + this.c3r_1 + ', cause=' + toString(this.d3r_1) + ')';
  }
  hashCode() {
    var result = getStringHashCode(this.c3r_1);
    result = imul(result, 31) + (this.d3r_1 == null ? 0 : hashCode(this.d3r_1)) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof RateLimited))
      return false;
    if (!(this.c3r_1 === other.c3r_1))
      return false;
    if (!equals(this.d3r_1, other.d3r_1))
      return false;
    return true;
  }
  get message() {
    return this.j();
  }
  get cause() {
    return this.k();
  }
}
class ServerError extends DrandError {
  static k3r(statusCode, message, cause) {
    message = message === VOID ? 'Server error (HTTP ' + statusCode + ')' : message;
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.j3r_1);
    $this.i3r_1 = statusCode;
    return $this;
  }
}
class NetworkError extends DrandError {
  static o3r(message, cause) {
    message = message === VOID ? 'Network request failed' : message;
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.n3r_1);
    return $this;
  }
}
class ParseError extends DrandError {
  static t3r(message, cause, details) {
    message = message === VOID ? 'Failed to parse response' : message;
    cause = cause === VOID ? null : cause;
    details = details === VOID ? null : details;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.s3r_1);
    $this.r3r_1 = details;
    return $this;
  }
}
class VerificationFailed extends DrandError {
  static t3p(message, cause, beaconRound) {
    message = message === VOID ? 'Signature verification failed' : message;
    cause = cause === VOID ? null : cause;
    beaconRound = beaconRound === VOID ? null : beaconRound;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.s3p_1);
    $this.r3p_1 = beaconRound;
    return $this;
  }
}
class InvalidBeacon extends DrandError {
  static l3p(beaconID, beaconRound, message, cause) {
    message = message === VOID ? 'Invalid beacon (' + beaconID + ') at round ' + beaconRound.toString() : message;
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.k3p_1);
    $this.i3p_1 = beaconID;
    $this.j3p_1 = beaconRound;
    return $this;
  }
}
class UnknownError extends DrandError {
  static z3r(message, cause) {
    cause = cause === VOID ? null : cause;
    var $this = this.t3q(message, cause);
    captureStack($this, $this.y3r_1);
    $this.w3r_1 = message;
    $this.x3r_1 = cause;
    delete $this.message;
    delete $this.cause;
    return $this;
  }
  j() {
    return this.w3r_1;
  }
  k() {
    return this.x3r_1;
  }
  toString() {
    return 'UnknownError(message=' + this.w3r_1 + ', cause=' + toString(this.x3r_1) + ')';
  }
  hashCode() {
    var result = getStringHashCode(this.w3r_1);
    result = imul(result, 31) + (this.x3r_1 == null ? 0 : hashCode(this.x3r_1)) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof UnknownError))
      return false;
    if (!(this.w3r_1 === other.w3r_1))
      return false;
    if (!equals(this.x3r_1, other.x3r_1))
      return false;
    return true;
  }
  get message() {
    return this.j();
  }
  get cause() {
    return this.k();
  }
}
class Curve extends Enum {}
class Group extends Enum {}
class HashToCurve {}
class BLS12381_G2 extends HashToCurve {
  constructor() {
    BLS12381_G2_instance = null;
    super();
    BLS12381_G2_instance = this;
    this.a3s_1 = 'BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_';
    this.b3s_1 = Curve_BLS12_381_getInstance();
    this.c3s_1 = Group_G2_getInstance();
    this.d3s_1 = HashFunction_SHA256_getInstance();
  }
  t3o() {
    return this.d3s_1;
  }
  toString() {
    return 'BLS12381_G2';
  }
  hashCode() {
    return -1110205388;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BLS12381_G2))
      return false;
    return true;
  }
}
class BLS12381_G1_RFC9380 extends HashToCurve {
  constructor() {
    BLS12381_G1_RFC9380_instance = null;
    super();
    BLS12381_G1_RFC9380_instance = this;
    this.e3s_1 = 'BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_';
    this.f3s_1 = Curve_BLS12_381_getInstance();
    this.g3s_1 = Group_G1_getInstance();
    this.h3s_1 = HashFunction_SHA256_getInstance();
  }
  t3o() {
    return this.h3s_1;
  }
  toString() {
    return 'BLS12381_G1_RFC9380';
  }
  hashCode() {
    return 1906732181;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BLS12381_G1_RFC9380))
      return false;
    return true;
  }
}
class BN254_G1 extends HashToCurve {
  constructor() {
    BN254_G1_instance = null;
    super();
    BN254_G1_instance = this;
    this.i3s_1 = 'BLS_SIG_BN254G1_XMD:KECCAK-256_SVDW_RO_NUL_';
    this.j3s_1 = Curve_BN254_getInstance();
    this.k3s_1 = Group_G1_getInstance();
    this.l3s_1 = HashFunction_KECCAK256_getInstance();
  }
  t3o() {
    return this.l3s_1;
  }
  toString() {
    return 'BN254_G1';
  }
  hashCode() {
    return -1520579272;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BN254_G1))
      return false;
    return true;
  }
}
class HashFunction extends Enum {
  w3o(data) {
    var tmp;
    switch (this.d3_1) {
      case 0:
        tmp = sha256(data);
        break;
      case 1:
        tmp = keccak256(data);
        break;
      default:
        noWhenBranchMatchedException();
        break;
    }
    return tmp;
  }
}
class Scheme {
  t3o() {
    return this.o3s().t3o();
  }
}
class BLS12381G2Chained extends Scheme {
  constructor() {
    BLS12381G2Chained_instance = null;
    super();
    BLS12381G2Chained_instance = this;
    this.m3s_1 = 'pedersen-bls-chained';
    this.n3s_1 = BLS12381_G2_getInstance();
  }
  o3s() {
    return this.n3s_1;
  }
  x3p(publicKey, message, signature) {
    // Inline function 'kotlin.runCatching' call
    var tmp;
    try {
      // Inline function 'kotlin.require' call
      if (!(publicKey.length === 48)) {
        var message_0 = 'Public key must be 48 bytes (G1 compressed point), got ' + publicKey.length;
        throw IllegalArgumentException.u(toString_0(message_0));
      }
      // Inline function 'kotlin.require' call
      if (!(signature.length === 96)) {
        var message_1 = 'Signature must be 96 bytes (G2 compressed point), got ' + signature.length;
        throw IllegalArgumentException.u(toString_0(message_1));
      }
      // Inline function 'kotlin.Companion.success' call
      var value = verifyBLS12381OnG2(publicKey, message, signature, this.n3s_1.a3s_1);
      tmp = _Result___init__impl__xyqfz8(value);
    } catch ($p) {
      var tmp_0;
      if ($p instanceof Error) {
        var e = $p;
        // Inline function 'kotlin.Companion.failure' call
        tmp_0 = _Result___init__impl__xyqfz8(createFailure(e));
      } else {
        throw $p;
      }
      tmp = tmp_0;
    }
    return tmp;
  }
  toString() {
    return 'BLS12381G2Chained';
  }
  hashCode() {
    return -905306922;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BLS12381G2Chained))
      return false;
    return true;
  }
}
class BLS12381G2Unchained extends Scheme {
  constructor() {
    BLS12381G2Unchained_instance = null;
    super();
    BLS12381G2Unchained_instance = this;
    this.p3s_1 = 'pedersen-bls-unchained';
    this.q3s_1 = BLS12381_G2_getInstance();
  }
  o3s() {
    return this.q3s_1;
  }
  x3p(publicKey, message, signature) {
    // Inline function 'kotlin.runCatching' call
    var tmp;
    try {
      // Inline function 'kotlin.require' call
      if (!(publicKey.length === 48)) {
        var message_0 = 'Public key must be 48 bytes (G1 compressed point), got ' + publicKey.length;
        throw IllegalArgumentException.u(toString_0(message_0));
      }
      // Inline function 'kotlin.require' call
      if (!(signature.length === 96)) {
        var message_1 = 'Signature must be 96 bytes (G2 compressed point), got ' + signature.length;
        throw IllegalArgumentException.u(toString_0(message_1));
      }
      // Inline function 'kotlin.Companion.success' call
      var value = verifyBLS12381OnG2(publicKey, message, signature, this.q3s_1.a3s_1);
      tmp = _Result___init__impl__xyqfz8(value);
    } catch ($p) {
      var tmp_0;
      if ($p instanceof Error) {
        var e = $p;
        // Inline function 'kotlin.Companion.failure' call
        tmp_0 = _Result___init__impl__xyqfz8(createFailure(e));
      } else {
        throw $p;
      }
      tmp = tmp_0;
    }
    return tmp;
  }
  toString() {
    return 'BLS12381G2Unchained';
  }
  hashCode() {
    return -1284535651;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BLS12381G2Unchained))
      return false;
    return true;
  }
}
class BLS12381G1UnchainedRFC9380 extends Scheme {
  constructor() {
    BLS12381G1UnchainedRFC9380_instance = null;
    super();
    BLS12381G1UnchainedRFC9380_instance = this;
    this.r3s_1 = 'bls-unchained-g1-rfc9380';
    this.s3s_1 = BLS12381_G1_RFC9380_getInstance();
  }
  o3s() {
    return this.s3s_1;
  }
  x3p(publicKey, message, signature) {
    // Inline function 'kotlin.runCatching' call
    var tmp;
    try {
      // Inline function 'kotlin.require' call
      if (!(signature.length === 48)) {
        var message_0 = 'Signature must be 48 bytes (G1 compressed point), got ' + signature.length;
        throw IllegalArgumentException.u(toString_0(message_0));
      }
      // Inline function 'kotlin.require' call
      if (!(publicKey.length === 96)) {
        var message_1 = 'Public key must be 96 bytes (G2 compressed point), got ' + publicKey.length;
        throw IllegalArgumentException.u(toString_0(message_1));
      }
      // Inline function 'kotlin.Companion.success' call
      var value = verifyBLS12381OnG1(publicKey, message, signature, this.s3s_1.e3s_1);
      tmp = _Result___init__impl__xyqfz8(value);
    } catch ($p) {
      var tmp_0;
      if ($p instanceof Error) {
        var e = $p;
        // Inline function 'kotlin.Companion.failure' call
        tmp_0 = _Result___init__impl__xyqfz8(createFailure(e));
      } else {
        throw $p;
      }
      tmp = tmp_0;
    }
    return tmp;
  }
  toString() {
    return 'BLS12381G1UnchainedRFC9380';
  }
  hashCode() {
    return -1790121629;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BLS12381G1UnchainedRFC9380))
      return false;
    return true;
  }
}
class BN254G1Unchained extends Scheme {
  constructor() {
    BN254G1Unchained_instance = null;
    super();
    BN254G1Unchained_instance = this;
    this.t3s_1 = 'bls-bn254-unchained-on-g1';
    this.u3s_1 = BN254_G1_getInstance();
  }
  o3s() {
    return this.u3s_1;
  }
  x3p(publicKey, message, signature) {
    // Inline function 'kotlin.runCatching' call
    var tmp;
    try {
      // Inline function 'kotlin.Companion.success' call
      var value = verifyBLSBN254OnG1(publicKey, message, signature, this.u3s_1.i3s_1);
      tmp = _Result___init__impl__xyqfz8(value);
    } catch ($p) {
      var tmp_0;
      if ($p instanceof Error) {
        var e = $p;
        // Inline function 'kotlin.Companion.failure' call
        tmp_0 = _Result___init__impl__xyqfz8(createFailure(e));
      } else {
        throw $p;
      }
      tmp = tmp_0;
    }
    return tmp;
  }
  toString() {
    return 'BN254G1Unchained';
  }
  hashCode() {
    return -233451275;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof BN254G1Unchained))
      return false;
    return true;
  }
}
class Companion {
  w3p(schemeId) {
    switch (schemeId) {
      case 'pedersen-bls-chained':
        return BLS12381G2Chained_getInstance();
      case 'pedersen-bls-unchained':
        return BLS12381G2Unchained_getInstance();
      case 'bls-unchained-g1-rfc9380':
        return BLS12381G1UnchainedRFC9380_getInstance();
      case 'bls-bn254-unchained-on-g1':
        return BN254G1Unchained_getInstance();
      default:
        return null;
    }
  }
}
class ByteOrder extends Enum {}
class DrandHttpApi$beacons$1 {
  constructor(this$0) {
    this.w3s_1 = this$0;
    this.v3s_1 = 'beacons';
  }
  h3q(id, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_info__qn9d5y.bind(VOID, this, id), $completion);
  }
  e3q(id, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_latest__2aozj5.bind(VOID, this, id), $completion);
  }
  d3q(id, round, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_atRound__h36r21.bind(VOID, this, id, round), $completion);
  }
}
class DrandHttpApi$chains$1 {
  constructor(this$0) {
    this.c3t_1 = this$0;
    this.b3t_1 = 'chains';
  }
}
class DrandHttpApi {
  constructor(baseUrl, httpClient) {
    baseUrl = baseUrl === VOID ? 'https://api.drand.sh' : baseUrl;
    httpClient = httpClient === VOID ? createDefaultHttpClient() : httpClient;
    this.x3s_1 = baseUrl;
    this.y3s_1 = httpClient;
    var tmp = this;
    tmp.z3s_1 = new DrandHttpApi$beacons$1(this);
    var tmp_0 = this;
    tmp_0.a3t_1 = new DrandHttpApi$chains$1(this);
  }
  c3q() {
    return this.z3s_1;
  }
  z4() {
    this.y3s_1.z4();
  }
}
class Companion_0 {}
class $serializer {
  constructor() {
    $serializer_instance = this;
    var tmp0_serialDesc = new PluginGeneratedSerialDescriptor('love.drand.network.data.ChainInfo', this, 7);
    tmp0_serialDesc.b1v('public_key', false);
    tmp0_serialDesc.b1v('period', false);
    tmp0_serialDesc.b1v('genesis_time', false);
    tmp0_serialDesc.b1v('genesis_seed', false);
    tmp0_serialDesc.b1v('chain_hash', false);
    tmp0_serialDesc.b1v('scheme', false);
    tmp0_serialDesc.b1v('beacon_id', false);
    this.d3t_1 = tmp0_serialDesc;
  }
  e3t(encoder, value) {
    var tmp0_desc = this.d3t_1;
    var tmp1_output = encoder.k1n(tmp0_desc);
    tmp1_output.a1p(tmp0_desc, 0, value.z3o_1);
    tmp1_output.w1o(tmp0_desc, 1, value.a3p_1);
    tmp1_output.w1o(tmp0_desc, 2, value.b3p_1);
    tmp1_output.a1p(tmp0_desc, 3, value.c3p_1);
    tmp1_output.a1p(tmp0_desc, 4, value.d3p_1);
    tmp1_output.a1p(tmp0_desc, 5, value.e3p_1);
    tmp1_output.a1p(tmp0_desc, 6, value.f3p_1);
    tmp1_output.l1n(tmp0_desc);
  }
  l1j(encoder, value) {
    return this.e3t(encoder, value instanceof ChainInfo ? value : THROW_CCE());
  }
  m1j(decoder) {
    var tmp0_desc = this.d3t_1;
    var tmp1_flag = true;
    var tmp2_index = 0;
    var tmp3_bitMask0 = 0;
    var tmp4_local0 = null;
    var tmp5_local1 = new Long(0, 0);
    var tmp6_local2 = new Long(0, 0);
    var tmp7_local3 = null;
    var tmp8_local4 = null;
    var tmp9_local5 = null;
    var tmp10_local6 = null;
    var tmp11_input = decoder.k1n(tmp0_desc);
    if (tmp11_input.a1o()) {
      tmp4_local0 = tmp11_input.u1n(tmp0_desc, 0);
      tmp3_bitMask0 = tmp3_bitMask0 | 1;
      tmp5_local1 = tmp11_input.q1n(tmp0_desc, 1);
      tmp3_bitMask0 = tmp3_bitMask0 | 2;
      tmp6_local2 = tmp11_input.q1n(tmp0_desc, 2);
      tmp3_bitMask0 = tmp3_bitMask0 | 4;
      tmp7_local3 = tmp11_input.u1n(tmp0_desc, 3);
      tmp3_bitMask0 = tmp3_bitMask0 | 8;
      tmp8_local4 = tmp11_input.u1n(tmp0_desc, 4);
      tmp3_bitMask0 = tmp3_bitMask0 | 16;
      tmp9_local5 = tmp11_input.u1n(tmp0_desc, 5);
      tmp3_bitMask0 = tmp3_bitMask0 | 32;
      tmp10_local6 = tmp11_input.u1n(tmp0_desc, 6);
      tmp3_bitMask0 = tmp3_bitMask0 | 64;
    } else
      while (tmp1_flag) {
        tmp2_index = tmp11_input.b1o(tmp0_desc);
        switch (tmp2_index) {
          case -1:
            tmp1_flag = false;
            break;
          case 0:
            tmp4_local0 = tmp11_input.u1n(tmp0_desc, 0);
            tmp3_bitMask0 = tmp3_bitMask0 | 1;
            break;
          case 1:
            tmp5_local1 = tmp11_input.q1n(tmp0_desc, 1);
            tmp3_bitMask0 = tmp3_bitMask0 | 2;
            break;
          case 2:
            tmp6_local2 = tmp11_input.q1n(tmp0_desc, 2);
            tmp3_bitMask0 = tmp3_bitMask0 | 4;
            break;
          case 3:
            tmp7_local3 = tmp11_input.u1n(tmp0_desc, 3);
            tmp3_bitMask0 = tmp3_bitMask0 | 8;
            break;
          case 4:
            tmp8_local4 = tmp11_input.u1n(tmp0_desc, 4);
            tmp3_bitMask0 = tmp3_bitMask0 | 16;
            break;
          case 5:
            tmp9_local5 = tmp11_input.u1n(tmp0_desc, 5);
            tmp3_bitMask0 = tmp3_bitMask0 | 32;
            break;
          case 6:
            tmp10_local6 = tmp11_input.u1n(tmp0_desc, 6);
            tmp3_bitMask0 = tmp3_bitMask0 | 64;
            break;
          default:
            throw UnknownFieldException.t1k(tmp2_index);
        }
      }
    tmp11_input.l1n(tmp0_desc);
    return ChainInfo.f3t(tmp3_bitMask0, tmp4_local0, tmp5_local1, tmp6_local2, tmp7_local3, tmp8_local4, tmp9_local5, tmp10_local6, null);
  }
  k1j() {
    return this.d3t_1;
  }
  q1v() {
    // Inline function 'kotlin.arrayOf' call
    // Inline function 'kotlin.js.unsafeCast' call
    // Inline function 'kotlin.js.asDynamic' call
    return [StringSerializer_getInstance(), LongSerializer_getInstance(), LongSerializer_getInstance(), StringSerializer_getInstance(), StringSerializer_getInstance(), StringSerializer_getInstance(), StringSerializer_getInstance()];
  }
}
class ChainInfo {
  toString() {
    return 'ChainInfo(publicKey=' + this.z3o_1 + ', period=' + this.a3p_1.toString() + ', genesisTime=' + this.b3p_1.toString() + ', genesisSeed=' + this.c3p_1 + ', chainHash=' + this.d3p_1 + ', scheme=' + this.e3p_1 + ', beaconId=' + this.f3p_1 + ')';
  }
  hashCode() {
    var result = getStringHashCode(this.z3o_1);
    result = imul(result, 31) + this.a3p_1.hashCode() | 0;
    result = imul(result, 31) + this.b3p_1.hashCode() | 0;
    result = imul(result, 31) + getStringHashCode(this.c3p_1) | 0;
    result = imul(result, 31) + getStringHashCode(this.d3p_1) | 0;
    result = imul(result, 31) + getStringHashCode(this.e3p_1) | 0;
    result = imul(result, 31) + getStringHashCode(this.f3p_1) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof ChainInfo))
      return false;
    if (!(this.z3o_1 === other.z3o_1))
      return false;
    if (!equalsLong(this.a3p_1, other.a3p_1))
      return false;
    if (!equalsLong(this.b3p_1, other.b3p_1))
      return false;
    if (!(this.c3p_1 === other.c3p_1))
      return false;
    if (!(this.d3p_1 === other.d3p_1))
      return false;
    if (!(this.e3p_1 === other.e3p_1))
      return false;
    if (!(this.f3p_1 === other.f3p_1))
      return false;
    return true;
  }
  static f3t(seen0, publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId, serializationConstructorMarker) {
    if (!(127 === (127 & seen0))) {
      throwMissingFieldException(seen0, 127, $serializer_getInstance().d3t_1);
    }
    var $this = createThis(this);
    $this.z3o_1 = publicKey;
    $this.a3p_1 = period;
    $this.b3p_1 = genesisTime;
    $this.c3p_1 = genesisSeed;
    $this.d3p_1 = chainHash;
    $this.e3p_1 = scheme;
    $this.f3p_1 = beaconId;
    return $this;
  }
}
class Companion_1 {}
class $serializer_0 {
  constructor() {
    $serializer_instance_0 = this;
    var tmp0_serialDesc = new PluginGeneratedSerialDescriptor('love.drand.network.data.RandomnessBeacon', this, 4);
    tmp0_serialDesc.b1v('round', false);
    tmp0_serialDesc.b1v('randomness', true);
    tmp0_serialDesc.b1v('signature', false);
    tmp0_serialDesc.b1v('previous_signature', true);
    this.g3t_1 = tmp0_serialDesc;
  }
  h3t(encoder, value) {
    var tmp0_desc = this.g3t_1;
    var tmp1_output = encoder.k1n(tmp0_desc);
    tmp1_output.w1o(tmp0_desc, 0, value.m3o_1);
    if (tmp1_output.i1p(tmp0_desc, 1) ? true : !(value.n3o_1 == null)) {
      tmp1_output.e1p(tmp0_desc, 1, StringSerializer_getInstance(), value.n3o_1);
    }
    tmp1_output.a1p(tmp0_desc, 2, value.o3o_1);
    if (tmp1_output.i1p(tmp0_desc, 3) ? true : !(value.p3o_1 == null)) {
      tmp1_output.e1p(tmp0_desc, 3, StringSerializer_getInstance(), value.p3o_1);
    }
    tmp1_output.l1n(tmp0_desc);
  }
  l1j(encoder, value) {
    return this.h3t(encoder, value instanceof RandomnessBeacon ? value : THROW_CCE());
  }
  m1j(decoder) {
    var tmp0_desc = this.g3t_1;
    var tmp1_flag = true;
    var tmp2_index = 0;
    var tmp3_bitMask0 = 0;
    var tmp4_local0 = new Long(0, 0);
    var tmp5_local1 = null;
    var tmp6_local2 = null;
    var tmp7_local3 = null;
    var tmp9_input = decoder.k1n(tmp0_desc);
    if (tmp9_input.a1o()) {
      tmp4_local0 = tmp9_input.q1n(tmp0_desc, 0);
      tmp3_bitMask0 = tmp3_bitMask0 | 1;
      tmp5_local1 = tmp9_input.y1n(tmp0_desc, 1, StringSerializer_getInstance(), tmp5_local1);
      tmp3_bitMask0 = tmp3_bitMask0 | 2;
      tmp6_local2 = tmp9_input.u1n(tmp0_desc, 2);
      tmp3_bitMask0 = tmp3_bitMask0 | 4;
      tmp7_local3 = tmp9_input.y1n(tmp0_desc, 3, StringSerializer_getInstance(), tmp7_local3);
      tmp3_bitMask0 = tmp3_bitMask0 | 8;
    } else
      while (tmp1_flag) {
        tmp2_index = tmp9_input.b1o(tmp0_desc);
        switch (tmp2_index) {
          case -1:
            tmp1_flag = false;
            break;
          case 0:
            tmp4_local0 = tmp9_input.q1n(tmp0_desc, 0);
            tmp3_bitMask0 = tmp3_bitMask0 | 1;
            break;
          case 1:
            tmp5_local1 = tmp9_input.y1n(tmp0_desc, 1, StringSerializer_getInstance(), tmp5_local1);
            tmp3_bitMask0 = tmp3_bitMask0 | 2;
            break;
          case 2:
            tmp6_local2 = tmp9_input.u1n(tmp0_desc, 2);
            tmp3_bitMask0 = tmp3_bitMask0 | 4;
            break;
          case 3:
            tmp7_local3 = tmp9_input.y1n(tmp0_desc, 3, StringSerializer_getInstance(), tmp7_local3);
            tmp3_bitMask0 = tmp3_bitMask0 | 8;
            break;
          default:
            throw UnknownFieldException.t1k(tmp2_index);
        }
      }
    tmp9_input.l1n(tmp0_desc);
    return RandomnessBeacon.i3t(tmp3_bitMask0, tmp4_local0, tmp5_local1, tmp6_local2, tmp7_local3, null);
  }
  k1j() {
    return this.g3t_1;
  }
  q1v() {
    // Inline function 'kotlin.arrayOf' call
    // Inline function 'kotlin.js.unsafeCast' call
    // Inline function 'kotlin.js.asDynamic' call
    return [LongSerializer_getInstance(), get_nullable(StringSerializer_getInstance()), StringSerializer_getInstance(), get_nullable(StringSerializer_getInstance())];
  }
}
class RandomnessBeacon {
  j3t() {
    var tmp0 = this.q3o_1;
    var tmp = KProperty1;
    // Inline function 'kotlin.getValue' call
    getPropertyCallableRef('derivedRandomness', 1, tmp, RandomnessBeacon$_get_derivedRandomness_$ref_vb060t(), null);
    return tmp0.s1();
  }
  r3o() {
    return toByteArray(this.m3o_1);
  }
  u3p() {
    return hexToByteArray(this.o3o_1);
  }
  v3p() {
    return hexToByteArray(this.j3t());
  }
  s3o() {
    var tmp0_safe_receiver = this.p3o_1;
    return tmp0_safe_receiver == null ? null : hexToByteArray(tmp0_safe_receiver);
  }
  y3o() {
    // Inline function 'kotlin.runCatching' call
    var tmp;
    try {
      // Inline function 'kotlin.require' call
      if (!(compare(this.m3o_1, new Long(0, 0)) > 0)) {
        var message = 'Round must be positive, got: ' + this.m3o_1.toString();
        throw IllegalArgumentException.u(toString_0(message));
      }
      // Inline function 'kotlin.require' call
      if (!isValidHex(this, this.o3o_1)) {
        var message_0 = 'Signature is not valid hex';
        throw IllegalArgumentException.u(toString_0(message_0));
      }
      // Inline function 'kotlin.require' call
      if (!isValidHex(this, this.j3t())) {
        var message_1 = 'Randomness is not valid hex';
        throw IllegalArgumentException.u(toString_0(message_1));
      }
      if (!(this.p3o_1 == null)) {
        // Inline function 'kotlin.require' call
        if (!isValidHex(this, this.p3o_1)) {
          var message_2 = 'Previous signature is not valid hex';
          throw IllegalArgumentException.u(toString_0(message_2));
        }
      }
      // Inline function 'kotlin.Companion.success' call
      tmp = _Result___init__impl__xyqfz8(Unit_instance);
    } catch ($p) {
      var tmp_0;
      if ($p instanceof Error) {
        var e = $p;
        // Inline function 'kotlin.Companion.failure' call
        tmp_0 = _Result___init__impl__xyqfz8(createFailure(e));
      } else {
        throw $p;
      }
      tmp = tmp_0;
    }
    return tmp;
  }
  toString() {
    return 'RandomnessBeacon(round=' + this.m3o_1.toString() + ', randomness=' + this.n3o_1 + ', signature=' + this.o3o_1 + ', previousSignature=' + this.p3o_1 + ')';
  }
  hashCode() {
    var result = this.m3o_1.hashCode();
    result = imul(result, 31) + (this.n3o_1 == null ? 0 : getStringHashCode(this.n3o_1)) | 0;
    result = imul(result, 31) + getStringHashCode(this.o3o_1) | 0;
    result = imul(result, 31) + (this.p3o_1 == null ? 0 : getStringHashCode(this.p3o_1)) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof RandomnessBeacon))
      return false;
    if (!equalsLong(this.m3o_1, other.m3o_1))
      return false;
    if (!(this.n3o_1 == other.n3o_1))
      return false;
    if (!(this.o3o_1 === other.o3o_1))
      return false;
    if (!(this.p3o_1 == other.p3o_1))
      return false;
    return true;
  }
  static i3t(seen0, round, randomness, signature, previousSignature, serializationConstructorMarker) {
    if (!(5 === (5 & seen0))) {
      throwMissingFieldException(seen0, 5, $serializer_getInstance_0().g3t_1);
    }
    var $this = createThis(this);
    $this.m3o_1 = round;
    if (0 === (seen0 & 2))
      $this.n3o_1 = null;
    else
      $this.n3o_1 = randomness;
    $this.o3o_1 = signature;
    if (0 === (seen0 & 8))
      $this.p3o_1 = null;
    else
      $this.p3o_1 = previousSignature;
    var tmp = $this;
    tmp.q3o_1 = lazy(RandomnessBeacon$_init_$lambda_4xj6ml($this));
    return $this;
  }
}
class Cache {
  constructor() {
    var tmp = this;
    // Inline function 'kotlin.collections.mapOf' call
    tmp.f3q_1 = emptyMap();
    this.g3q_1 = Mutex();
  }
  b3(key) {
    return this.f3q_1.b3(key);
  }
  i3q(key, value, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_put__cb93wb.bind(VOID, this, key, value), $completion);
  }
}
class Beacon {
  constructor(round, randomness, signature, previousSignature) {
    this.round = round;
    this.randomness = randomness;
    this.signature = signature;
    this.previousSignature = previousSignature;
  }
  k3t() {
    return this.round;
  }
  l3t() {
    return this.randomness;
  }
  m3t() {
    return this.signature;
  }
  n3t() {
    return this.previousSignature;
  }
  si() {
    return this.round;
  }
  ti() {
    return this.randomness;
  }
  o3t() {
    return this.signature;
  }
  p3t() {
    return this.previousSignature;
  }
  q3t(round, randomness, signature, previousSignature) {
    return new Beacon(round, randomness, signature, previousSignature);
  }
  copy(round, randomness, signature, previousSignature, $super) {
    round = round === VOID ? this.round : round;
    randomness = randomness === VOID ? this.randomness : randomness;
    signature = signature === VOID ? this.signature : signature;
    previousSignature = previousSignature === VOID ? this.previousSignature : previousSignature;
    return $super === VOID ? this.q3t(round, randomness, signature, previousSignature) : $super.q3t.call(this, round, randomness, signature, previousSignature);
  }
  toString() {
    return 'Beacon(round=' + this.round + ', randomness=' + this.randomness + ', signature=' + this.signature + ', previousSignature=' + this.previousSignature + ')';
  }
  hashCode() {
    var result = getNumberHashCode(this.round);
    result = imul(result, 31) + getStringHashCode(this.randomness) | 0;
    result = imul(result, 31) + getStringHashCode(this.signature) | 0;
    result = imul(result, 31) + (this.previousSignature == null ? 0 : getStringHashCode(this.previousSignature)) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof Beacon))
      return false;
    if (!equals(this.round, other.round))
      return false;
    if (!(this.randomness === other.randomness))
      return false;
    if (!(this.signature === other.signature))
      return false;
    if (!(this.previousSignature == other.previousSignature))
      return false;
    return true;
  }
}
class ChainInfo_0 {
  constructor(publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId) {
    this.publicKey = publicKey;
    this.period = period;
    this.genesisTime = genesisTime;
    this.genesisSeed = genesisSeed;
    this.chainHash = chainHash;
    this.scheme = scheme;
    this.beaconId = beaconId;
  }
  r3t() {
    return this.publicKey;
  }
  s3t() {
    return this.period;
  }
  t3t() {
    return this.genesisTime;
  }
  u3t() {
    return this.genesisSeed;
  }
  v3t() {
    return this.chainHash;
  }
  w3t() {
    return this.scheme;
  }
  x3t() {
    return this.beaconId;
  }
  si() {
    return this.publicKey;
  }
  ti() {
    return this.period;
  }
  o3t() {
    return this.genesisTime;
  }
  p3t() {
    return this.genesisSeed;
  }
  y3t() {
    return this.chainHash;
  }
  z3t() {
    return this.scheme;
  }
  a3u() {
    return this.beaconId;
  }
  b3u(publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId) {
    return new ChainInfo_0(publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId);
  }
  copy(publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId, $super) {
    publicKey = publicKey === VOID ? this.publicKey : publicKey;
    period = period === VOID ? this.period : period;
    genesisTime = genesisTime === VOID ? this.genesisTime : genesisTime;
    genesisSeed = genesisSeed === VOID ? this.genesisSeed : genesisSeed;
    chainHash = chainHash === VOID ? this.chainHash : chainHash;
    scheme = scheme === VOID ? this.scheme : scheme;
    beaconId = beaconId === VOID ? this.beaconId : beaconId;
    return $super === VOID ? this.b3u(publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId) : $super.b3u.call(this, publicKey, period, genesisTime, genesisSeed, chainHash, scheme, beaconId);
  }
  toString() {
    return 'ChainInfo(publicKey=' + this.publicKey + ', period=' + this.period + ', genesisTime=' + this.genesisTime + ', genesisSeed=' + this.genesisSeed + ', chainHash=' + this.chainHash + ', scheme=' + this.scheme + ', beaconId=' + this.beaconId + ')';
  }
  hashCode() {
    var result = getStringHashCode(this.publicKey);
    result = imul(result, 31) + getNumberHashCode(this.period) | 0;
    result = imul(result, 31) + getNumberHashCode(this.genesisTime) | 0;
    result = imul(result, 31) + getStringHashCode(this.genesisSeed) | 0;
    result = imul(result, 31) + getStringHashCode(this.chainHash) | 0;
    result = imul(result, 31) + getStringHashCode(this.scheme) | 0;
    result = imul(result, 31) + getStringHashCode(this.beaconId) | 0;
    return result;
  }
  equals(other) {
    if (this === other)
      return true;
    if (!(other instanceof ChainInfo_0))
      return false;
    if (!(this.publicKey === other.publicKey))
      return false;
    if (!equals(this.period, other.period))
      return false;
    if (!equals(this.genesisTime, other.genesisTime))
      return false;
    if (!(this.genesisSeed === other.genesisSeed))
      return false;
    if (!(this.chainHash === other.chainHash))
      return false;
    if (!(this.scheme === other.scheme))
      return false;
    if (!(this.beaconId === other.beaconId))
      return false;
    return true;
  }
}
class Client$getVerifiedLatestBeacon$slambda {
  constructor(this$0, $beaconId) {
    this.e3u_1 = this$0;
    this.f3u_1 = $beaconId;
  }
  p1h($this$promise, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_invoke__zhh2q8.bind(VOID, this, $this$promise), $completion);
  }
  ic(p1, $completion) {
    return this.p1h((!(p1 == null) ? isInterface(p1, CoroutineScope) : false) ? p1 : THROW_CCE(), $completion);
  }
}
class Client$getVerifiedBeacon$slambda {
  constructor(this$0, $beaconId, $round) {
    this.g3u_1 = this$0;
    this.h3u_1 = $beaconId;
    this.i3u_1 = $round;
  }
  p1h($this$promise, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_invoke__zhh2q8_0.bind(VOID, this, $this$promise), $completion);
  }
  ic(p1, $completion) {
    return this.p1h((!(p1 == null) ? isInterface(p1, CoroutineScope) : false) ? p1 : THROW_CCE(), $completion);
  }
}
class Client$getChainInfo$slambda {
  constructor(this$0, $beaconId) {
    this.j3u_1 = this$0;
    this.k3u_1 = $beaconId;
  }
  p1h($this$promise, $completion) {
    return suspendOrReturn(/*#__NOINLINE__*/_generator_invoke__zhh2q8_1.bind(VOID, this, $this$promise), $completion);
  }
  ic(p1, $completion) {
    return this.p1h((!(p1 == null) ? isInterface(p1, CoroutineScope) : false) ? p1 : THROW_CCE(), $completion);
  }
}
class Client {
  constructor(baseUrl) {
    baseUrl = baseUrl === VOID ? 'https://api.drand.sh' : baseUrl;
    this.c3u_1 = baseUrl;
    this.d3u_1 = DrandClient.k3q(this.c3u_1);
  }
  getVerifiedLatestBeacon(beaconId) {
    var tmp = GlobalScope_instance;
    return promise(tmp, VOID, VOID, Client$getVerifiedLatestBeacon$slambda_0(this, beaconId));
  }
  getVerifiedBeacon(beaconId, round) {
    var tmp = GlobalScope_instance;
    return promise(tmp, VOID, VOID, Client$getVerifiedBeacon$slambda_0(this, beaconId, round));
  }
  getChainInfo(beaconId) {
    var tmp = GlobalScope_instance;
    return promise(tmp, VOID, VOID, Client$getChainInfo$slambda_0(this, beaconId));
  }
  close() {
    return this.d3u_1.z4();
  }
}
//endregion
function digestBeacon($this, beacon, scheme) {
  // Inline function 'kotlin.runCatching' call
  var tmp;
  try {
    var roundBytes = beacon.r3o();
    var previousSignatureBytes = beacon.s3o();
    var tmp_0;
    var tmp_1;
    if (!(previousSignatureBytes == null)) {
      // Inline function 'kotlin.collections.isNotEmpty' call
      // Inline function 'kotlin.collections.isEmpty' call
      tmp_1 = !(previousSignatureBytes.length === 0);
    } else {
      tmp_1 = false;
    }
    if (tmp_1) {
      // Inline function 'kotlin.collections.plus' call
      tmp_0 = primitiveArrayConcat([previousSignatureBytes, roundBytes]);
    } else {
      tmp_0 = roundBytes;
    }
    var preimage = tmp_0;
    // Inline function 'kotlin.Companion.success' call
    var value = scheme.t3o().w3o(preimage);
    tmp = _Result___init__impl__xyqfz8(value);
  } catch ($p) {
    var tmp_2;
    if ($p instanceof Error) {
      var e = $p;
      // Inline function 'kotlin.Companion.failure' call
      tmp_2 = _Result___init__impl__xyqfz8(createFailure(e));
    } else {
      throw $p;
    }
    tmp = tmp_2;
  }
  return tmp;
}
function *_generator_getVerifiedBeacon__6uekoe($this, beaconId, round, $completion) {
  var tmp = $this.b3q(beaconId, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  // Inline function 'kotlin.getOrElse' call
  var this_0 = tmp.bo_1;
  var exception = Result__exceptionOrNull_impl_p6xea9(this_0);
  var tmp_0;
  if (exception == null) {
    var tmp_1 = _Result___get_value__impl__bjfvqg(this_0);
    tmp_0 = (tmp_1 == null ? true : !(tmp_1 == null)) ? tmp_1 : THROW_CCE();
  } else {
    // Inline function 'kotlin.Companion.failure' call
    var tmp$ret$0 = _Result___init__impl__xyqfz8(createFailure(exception));
    return new Result(tmp$ret$0);
  }
  var chainInfo = tmp_0;
  var tmp_2 = $this.y3p_1.c3q().d3q(beaconId, round, $completion);
  if (tmp_2 === get_COROUTINE_SUSPENDED())
    tmp_2 = yield tmp_2;
  // Inline function 'kotlin.getOrElse' call
  var this_1 = tmp_2.bo_1;
  var exception_0 = Result__exceptionOrNull_impl_p6xea9(this_1);
  var tmp_3;
  if (exception_0 == null) {
    var tmp_4 = _Result___get_value__impl__bjfvqg(this_1);
    tmp_3 = (tmp_4 == null ? true : !(tmp_4 == null)) ? tmp_4 : THROW_CCE();
  } else {
    // Inline function 'kotlin.Companion.failure' call
    var tmp$ret$2 = _Result___init__impl__xyqfz8(createFailure(exception_0));
    return new Result(tmp$ret$2);
  }
  var beacon = tmp_3;
  return new Result($this.a3q_1.x3o(chainInfo, beacon, round));
}
function *_generator_getVerifiedLatestBeacon__wywytn($this, beaconId, $completion) {
  var tmp = $this.b3q(beaconId, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  // Inline function 'kotlin.getOrElse' call
  var this_0 = tmp.bo_1;
  var exception = Result__exceptionOrNull_impl_p6xea9(this_0);
  var tmp_0;
  if (exception == null) {
    var tmp_1 = _Result___get_value__impl__bjfvqg(this_0);
    tmp_0 = (tmp_1 == null ? true : !(tmp_1 == null)) ? tmp_1 : THROW_CCE();
  } else {
    // Inline function 'kotlin.Companion.failure' call
    var tmp$ret$0 = _Result___init__impl__xyqfz8(createFailure(exception));
    return new Result(tmp$ret$0);
  }
  var chainInfo = tmp_0;
  var tmp_2 = $this.y3p_1.c3q().e3q(beaconId, $completion);
  if (tmp_2 === get_COROUTINE_SUSPENDED())
    tmp_2 = yield tmp_2;
  // Inline function 'kotlin.getOrElse' call
  var this_1 = tmp_2.bo_1;
  var exception_0 = Result__exceptionOrNull_impl_p6xea9(this_1);
  var tmp_3;
  if (exception_0 == null) {
    var tmp_4 = _Result___get_value__impl__bjfvqg(this_1);
    tmp_3 = (tmp_4 == null ? true : !(tmp_4 == null)) ? tmp_4 : THROW_CCE();
  } else {
    // Inline function 'kotlin.Companion.failure' call
    var tmp$ret$2 = _Result___init__impl__xyqfz8(createFailure(exception_0));
    return new Result(tmp$ret$2);
  }
  var latestBeacon = tmp_3;
  var expectedRound = latestBeacon.m3o_1;
  return new Result($this.a3q_1.x3o(chainInfo, latestBeacon, expectedRound));
}
function *_generator_getChainInfo__qbfrv3($this, beaconId, $completion) {
  var tmp0_safe_receiver = $this.z3p_1.b3('chainInfo_' + beaconId);
  if (tmp0_safe_receiver == null)
    null;
  else {
    // Inline function 'kotlin.let' call
    // Inline function 'kotlin.Companion.success' call
    var tmp$ret$0 = _Result___init__impl__xyqfz8(tmp0_safe_receiver);
    return new Result(tmp$ret$0);
  }
  var tmp = $this.y3p_1.c3q().h3q(beaconId, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  var result = tmp.bo_1;
  // Inline function 'kotlin.onSuccess' call
  if (_Result___get_isSuccess__impl__sndoy8(result)) {
    var tmp_0 = _Result___get_value__impl__bjfvqg(result);
    var info = (tmp_0 == null ? true : !(tmp_0 == null)) ? tmp_0 : THROW_CCE();
    var tmp_1 = $this.z3p_1.i3q('chainInfo_' + beaconId, info, $completion);
    if (tmp_1 === get_COROUTINE_SUSPENDED())
      tmp_1 = yield tmp_1;
  }
  return new Result(result);
}
var Curve_BLS12_381_instance;
var Curve_BN254_instance;
var Curve_entriesInitialized;
function Curve_initEntries() {
  if (Curve_entriesInitialized)
    return Unit_instance;
  Curve_entriesInitialized = true;
  Curve_BLS12_381_instance = new Curve('BLS12_381', 0);
  Curve_BN254_instance = new Curve('BN254', 1);
}
var Group_G1_instance;
var Group_G2_instance;
var Group_entriesInitialized;
function Group_initEntries() {
  if (Group_entriesInitialized)
    return Unit_instance;
  Group_entriesInitialized = true;
  Group_G1_instance = new Group('G1', 0);
  Group_G2_instance = new Group('G2', 1);
}
var BLS12381_G2_instance;
function BLS12381_G2_getInstance() {
  if (BLS12381_G2_instance === VOID)
    new BLS12381_G2();
  return BLS12381_G2_instance;
}
var BLS12381_G1_RFC9380_instance;
function BLS12381_G1_RFC9380_getInstance() {
  if (BLS12381_G1_RFC9380_instance === VOID)
    new BLS12381_G1_RFC9380();
  return BLS12381_G1_RFC9380_instance;
}
var BN254_G1_instance;
function BN254_G1_getInstance() {
  if (BN254_G1_instance === VOID)
    new BN254_G1();
  return BN254_G1_instance;
}
function Curve_BLS12_381_getInstance() {
  Curve_initEntries();
  return Curve_BLS12_381_instance;
}
function Curve_BN254_getInstance() {
  Curve_initEntries();
  return Curve_BN254_instance;
}
function Group_G1_getInstance() {
  Group_initEntries();
  return Group_G1_instance;
}
function Group_G2_getInstance() {
  Group_initEntries();
  return Group_G2_instance;
}
var HashFunction_SHA256_instance;
var HashFunction_KECCAK256_instance;
var HashFunction_entriesInitialized;
function HashFunction_initEntries() {
  if (HashFunction_entriesInitialized)
    return Unit_instance;
  HashFunction_entriesInitialized = true;
  HashFunction_SHA256_instance = new HashFunction('SHA256', 0);
  HashFunction_KECCAK256_instance = new HashFunction('KECCAK256', 1);
}
function HashFunction_SHA256_getInstance() {
  HashFunction_initEntries();
  return HashFunction_SHA256_instance;
}
function HashFunction_KECCAK256_getInstance() {
  HashFunction_initEntries();
  return HashFunction_KECCAK256_instance;
}
var BLS12381G2Chained_instance;
function BLS12381G2Chained_getInstance() {
  if (BLS12381G2Chained_instance === VOID)
    new BLS12381G2Chained();
  return BLS12381G2Chained_instance;
}
var BLS12381G2Unchained_instance;
function BLS12381G2Unchained_getInstance() {
  if (BLS12381G2Unchained_instance === VOID)
    new BLS12381G2Unchained();
  return BLS12381G2Unchained_instance;
}
var BLS12381G1UnchainedRFC9380_instance;
function BLS12381G1UnchainedRFC9380_getInstance() {
  if (BLS12381G1UnchainedRFC9380_instance === VOID)
    new BLS12381G1UnchainedRFC9380();
  return BLS12381G1UnchainedRFC9380_instance;
}
var BN254G1Unchained_instance;
function BN254G1Unchained_getInstance() {
  if (BN254G1Unchained_instance === VOID)
    new BN254G1Unchained();
  return BN254G1Unchained_instance;
}
var Companion_instance_0;
function Companion_getInstance_1() {
  return Companion_instance_0;
}
function toByteArray(_this__u8e3s4, byteOrder) {
  byteOrder = byteOrder === VOID ? ByteOrder_BIG_ENDIAN_getInstance() : byteOrder;
  // Inline function 'kotlin.apply' call
  var this_0 = new Int8Array(8);
  var value = _this__u8e3s4;
  var tmp;
  switch (byteOrder.d3_1) {
    case 0:
      tmp = downTo(7, 0);
      break;
    case 1:
      tmp = until(0, 8);
      break;
    default:
      noWhenBranchMatchedException();
      break;
  }
  var range = tmp;
  var inductionVariable = range.v1_1;
  var last = range.w1_1;
  var step = range.x1_1;
  if (step > 0 && inductionVariable <= last || (step < 0 && last <= inductionVariable))
    do {
      var i = inductionVariable;
      inductionVariable = inductionVariable + step | 0;
      this_0[i] = convertToByte(bitwiseAnd(value, new Long(255, 0)));
      value = shiftRight(value, 8);
    }
     while (!(i === last));
  return this_0;
}
var ByteOrder_BIG_ENDIAN_instance;
var ByteOrder_LITTLE_ENDIAN_instance;
var ByteOrder_entriesInitialized;
function ByteOrder_initEntries() {
  if (ByteOrder_entriesInitialized)
    return Unit_instance;
  ByteOrder_entriesInitialized = true;
  ByteOrder_BIG_ENDIAN_instance = new ByteOrder('BIG_ENDIAN', 0);
  ByteOrder_LITTLE_ENDIAN_instance = new ByteOrder('LITTLE_ENDIAN', 1);
}
function ByteOrder_BIG_ENDIAN_getInstance() {
  ByteOrder_initEntries();
  return ByteOrder_BIG_ENDIAN_instance;
}
function createDefaultHttpClient() {
  return HttpClient(createDefaultHttpClient$lambda);
}
function *_generator_info__qn9d5y($this, id, $completion) {
  // Inline function 'love.drand.network.DrandHttpApi.executeRequest' call
  $this.w3s_1;
  var tmp;
  try {
    var tmp0 = $this.w3s_1.y3s_1;
    // Inline function 'io.ktor.client.request.get' call
    var urlString = $this.w3s_1.x3s_1 + '/v2/' + $this.v3s_1 + '/' + id + '/info';
    // Inline function 'io.ktor.client.request.get' call
    // Inline function 'kotlin.apply' call
    var this_0 = new HttpRequestBuilder();
    url(this_0, urlString);
    // Inline function 'io.ktor.client.request.get' call
    this_0.g2u_1 = Companion_getInstance().d2i_1;
    // Inline function 'io.ktor.client.request.request' call
    var tmp_0 = (new HttpStatement(this_0, tmp0)).m39($completion);
    if (tmp_0 === get_COROUTINE_SUSPENDED())
      tmp_0 = yield tmp_0;
    // Inline function 'io.ktor.client.call.body' call
    var tmp_1 = tmp_0.f2w();
    // Inline function 'io.ktor.util.reflect.typeInfo' call
    var tmp_2 = getKClass(ChainInfo);
    // Inline function 'io.ktor.util.reflect.typeOfOrNull' call
    var tmp_3;
    try {
      tmp_3 = createKType(getKClass(ChainInfo), arrayOf([]), false);
    } catch ($p) {
      var tmp_4;
      if ($p instanceof Error) {
        var _unused_var__etf5q3 = $p;
        tmp_4 = null;
      } else {
        throw $p;
      }
      tmp_3 = tmp_4;
    }
    var tmp$ret$7 = tmp_3;
    var tmp$ret$8 = new TypeInfo(tmp_2, tmp$ret$7);
    var tmp_5 = tmp_1.c2w(tmp$ret$8, $completion);
    if (tmp_5 === get_COROUTINE_SUSPENDED())
      tmp_5 = yield tmp_5;
    var tmp_6 = tmp_5;
    // Inline function 'kotlin.Companion.success' call
    var value = tmp_6 instanceof ChainInfo ? tmp_6 : THROW_CCE();
    tmp = _Result___init__impl__xyqfz8(value);
  } catch ($p) {
    var tmp_7;
    if ($p instanceof CancellationException) {
      var e = $p;
      throw e;
    } else {
      if ($p instanceof ClientRequestException) {
        var e_0 = $p;
        var tmp0_subject = e_0.w30_1.o2w();
        // Inline function 'kotlin.Companion.failure' call
        var exception = tmp0_subject.equals(Companion_getInstance_0().t2j_1) ? NotFound.q3q('Resource not found: ' + get_request(e_0.w30_1).h2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().p2j_1) ? InvalidRequest.z3q('Invalid request: ' + e_0.w30_1.o2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().m2k_1) ? RateLimited.f3r('Rate limited by server', e_0) : ServerError.k3r(e_0.w30_1.o2w().y2k_1, 'Client error: ' + e_0.w30_1.o2w().toString(), e_0);
        tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception));
      } else {
        if ($p instanceof ServerResponseException) {
          var e_1 = $p;
          // Inline function 'kotlin.Companion.failure' call
          var exception_0 = ServerError.k3r(e_1.w30_1.o2w().y2k_1, 'Server error: ' + e_1.w30_1.o2w().toString(), e_1);
          tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_0));
        } else {
          if ($p instanceof SerializationException) {
            var e_2 = $p;
            // Inline function 'kotlin.Companion.failure' call
            var exception_1 = ParseError.t3r('Failed to parse response: ' + e_2.message, e_2);
            tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_1));
          } else {
            if ($p instanceof JsonConvertException) {
              var e_3 = $p;
              // Inline function 'kotlin.Companion.failure' call
              var exception_2 = ParseError.t3r('Failed to parse JSON: ' + e_3.message, e_3);
              tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_2));
            } else {
              if ($p instanceof IOException) {
                var e_4 = $p;
                // Inline function 'kotlin.Companion.failure' call
                var exception_3 = NetworkError.o3r('Network I/O error: ' + e_4.message, e_4);
                tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_3));
              } else {
                if ($p instanceof Exception) {
                  var e_5 = $p;
                  // Inline function 'kotlin.Companion.failure' call
                  var exception_4 = UnknownError.z3r('Unexpected error: ' + e_5.message, e_5);
                  tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_4));
                } else {
                  throw $p;
                }
              }
            }
          }
        }
      }
    }
    tmp = tmp_7;
  }
  var tmp$ret$18 = tmp;
  return new Result(tmp$ret$18);
}
function *_generator_latest__2aozj5($this, id, $completion) {
  // Inline function 'love.drand.network.DrandHttpApi.executeRequest' call
  $this.w3s_1;
  var tmp;
  try {
    var tmp0 = $this.w3s_1.y3s_1;
    // Inline function 'io.ktor.client.request.get' call
    var urlString = $this.w3s_1.x3s_1 + '/v2/' + $this.v3s_1 + '/' + id + '/rounds/latest';
    // Inline function 'io.ktor.client.request.get' call
    // Inline function 'kotlin.apply' call
    var this_0 = new HttpRequestBuilder();
    url(this_0, urlString);
    // Inline function 'io.ktor.client.request.get' call
    this_0.g2u_1 = Companion_getInstance().d2i_1;
    // Inline function 'io.ktor.client.request.request' call
    var tmp_0 = (new HttpStatement(this_0, tmp0)).m39($completion);
    if (tmp_0 === get_COROUTINE_SUSPENDED())
      tmp_0 = yield tmp_0;
    // Inline function 'io.ktor.client.call.body' call
    var tmp_1 = tmp_0.f2w();
    // Inline function 'io.ktor.util.reflect.typeInfo' call
    var tmp_2 = getKClass(RandomnessBeacon);
    // Inline function 'io.ktor.util.reflect.typeOfOrNull' call
    var tmp_3;
    try {
      tmp_3 = createKType(getKClass(RandomnessBeacon), arrayOf([]), false);
    } catch ($p) {
      var tmp_4;
      if ($p instanceof Error) {
        var _unused_var__etf5q3 = $p;
        tmp_4 = null;
      } else {
        throw $p;
      }
      tmp_3 = tmp_4;
    }
    var tmp$ret$7 = tmp_3;
    var tmp$ret$8 = new TypeInfo(tmp_2, tmp$ret$7);
    var tmp_5 = tmp_1.c2w(tmp$ret$8, $completion);
    if (tmp_5 === get_COROUTINE_SUSPENDED())
      tmp_5 = yield tmp_5;
    var tmp_6 = tmp_5;
    // Inline function 'kotlin.Companion.success' call
    var value = tmp_6 instanceof RandomnessBeacon ? tmp_6 : THROW_CCE();
    tmp = _Result___init__impl__xyqfz8(value);
  } catch ($p) {
    var tmp_7;
    if ($p instanceof CancellationException) {
      var e = $p;
      throw e;
    } else {
      if ($p instanceof ClientRequestException) {
        var e_0 = $p;
        var tmp0_subject = e_0.w30_1.o2w();
        // Inline function 'kotlin.Companion.failure' call
        var exception = tmp0_subject.equals(Companion_getInstance_0().t2j_1) ? NotFound.q3q('Resource not found: ' + get_request(e_0.w30_1).h2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().p2j_1) ? InvalidRequest.z3q('Invalid request: ' + e_0.w30_1.o2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().m2k_1) ? RateLimited.f3r('Rate limited by server', e_0) : ServerError.k3r(e_0.w30_1.o2w().y2k_1, 'Client error: ' + e_0.w30_1.o2w().toString(), e_0);
        tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception));
      } else {
        if ($p instanceof ServerResponseException) {
          var e_1 = $p;
          // Inline function 'kotlin.Companion.failure' call
          var exception_0 = ServerError.k3r(e_1.w30_1.o2w().y2k_1, 'Server error: ' + e_1.w30_1.o2w().toString(), e_1);
          tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_0));
        } else {
          if ($p instanceof SerializationException) {
            var e_2 = $p;
            // Inline function 'kotlin.Companion.failure' call
            var exception_1 = ParseError.t3r('Failed to parse response: ' + e_2.message, e_2);
            tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_1));
          } else {
            if ($p instanceof JsonConvertException) {
              var e_3 = $p;
              // Inline function 'kotlin.Companion.failure' call
              var exception_2 = ParseError.t3r('Failed to parse JSON: ' + e_3.message, e_3);
              tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_2));
            } else {
              if ($p instanceof IOException) {
                var e_4 = $p;
                // Inline function 'kotlin.Companion.failure' call
                var exception_3 = NetworkError.o3r('Network I/O error: ' + e_4.message, e_4);
                tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_3));
              } else {
                if ($p instanceof Exception) {
                  var e_5 = $p;
                  // Inline function 'kotlin.Companion.failure' call
                  var exception_4 = UnknownError.z3r('Unexpected error: ' + e_5.message, e_5);
                  tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_4));
                } else {
                  throw $p;
                }
              }
            }
          }
        }
      }
    }
    tmp = tmp_7;
  }
  var tmp$ret$18 = tmp;
  return new Result(tmp$ret$18);
}
function *_generator_atRound__h36r21($this, id, round, $completion) {
  // Inline function 'love.drand.network.DrandHttpApi.executeRequest' call
  $this.w3s_1;
  var tmp;
  try {
    var tmp0 = $this.w3s_1.y3s_1;
    // Inline function 'io.ktor.client.request.get' call
    var urlString = $this.w3s_1.x3s_1 + '/v2/' + $this.v3s_1 + '/' + id + '/rounds/' + round.toString();
    // Inline function 'io.ktor.client.request.get' call
    // Inline function 'kotlin.apply' call
    var this_0 = new HttpRequestBuilder();
    url(this_0, urlString);
    // Inline function 'io.ktor.client.request.get' call
    this_0.g2u_1 = Companion_getInstance().d2i_1;
    // Inline function 'io.ktor.client.request.request' call
    var tmp_0 = (new HttpStatement(this_0, tmp0)).m39($completion);
    if (tmp_0 === get_COROUTINE_SUSPENDED())
      tmp_0 = yield tmp_0;
    // Inline function 'io.ktor.client.call.body' call
    var tmp_1 = tmp_0.f2w();
    // Inline function 'io.ktor.util.reflect.typeInfo' call
    var tmp_2 = getKClass(RandomnessBeacon);
    // Inline function 'io.ktor.util.reflect.typeOfOrNull' call
    var tmp_3;
    try {
      tmp_3 = createKType(getKClass(RandomnessBeacon), arrayOf([]), false);
    } catch ($p) {
      var tmp_4;
      if ($p instanceof Error) {
        var _unused_var__etf5q3 = $p;
        tmp_4 = null;
      } else {
        throw $p;
      }
      tmp_3 = tmp_4;
    }
    var tmp$ret$7 = tmp_3;
    var tmp$ret$8 = new TypeInfo(tmp_2, tmp$ret$7);
    var tmp_5 = tmp_1.c2w(tmp$ret$8, $completion);
    if (tmp_5 === get_COROUTINE_SUSPENDED())
      tmp_5 = yield tmp_5;
    var tmp_6 = tmp_5;
    // Inline function 'kotlin.Companion.success' call
    var value = tmp_6 instanceof RandomnessBeacon ? tmp_6 : THROW_CCE();
    tmp = _Result___init__impl__xyqfz8(value);
  } catch ($p) {
    var tmp_7;
    if ($p instanceof CancellationException) {
      var e = $p;
      throw e;
    } else {
      if ($p instanceof ClientRequestException) {
        var e_0 = $p;
        var tmp0_subject = e_0.w30_1.o2w();
        // Inline function 'kotlin.Companion.failure' call
        var exception = tmp0_subject.equals(Companion_getInstance_0().t2j_1) ? NotFound.q3q('Resource not found: ' + get_request(e_0.w30_1).h2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().p2j_1) ? InvalidRequest.z3q('Invalid request: ' + e_0.w30_1.o2w().toString(), e_0) : tmp0_subject.equals(Companion_getInstance_0().m2k_1) ? RateLimited.f3r('Rate limited by server', e_0) : ServerError.k3r(e_0.w30_1.o2w().y2k_1, 'Client error: ' + e_0.w30_1.o2w().toString(), e_0);
        tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception));
      } else {
        if ($p instanceof ServerResponseException) {
          var e_1 = $p;
          // Inline function 'kotlin.Companion.failure' call
          var exception_0 = ServerError.k3r(e_1.w30_1.o2w().y2k_1, 'Server error: ' + e_1.w30_1.o2w().toString(), e_1);
          tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_0));
        } else {
          if ($p instanceof SerializationException) {
            var e_2 = $p;
            // Inline function 'kotlin.Companion.failure' call
            var exception_1 = ParseError.t3r('Failed to parse response: ' + e_2.message, e_2);
            tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_1));
          } else {
            if ($p instanceof JsonConvertException) {
              var e_3 = $p;
              // Inline function 'kotlin.Companion.failure' call
              var exception_2 = ParseError.t3r('Failed to parse JSON: ' + e_3.message, e_3);
              tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_2));
            } else {
              if ($p instanceof IOException) {
                var e_4 = $p;
                // Inline function 'kotlin.Companion.failure' call
                var exception_3 = NetworkError.o3r('Network I/O error: ' + e_4.message, e_4);
                tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_3));
              } else {
                if ($p instanceof Exception) {
                  var e_5 = $p;
                  // Inline function 'kotlin.Companion.failure' call
                  var exception_4 = UnknownError.z3r('Unexpected error: ' + e_5.message, e_5);
                  tmp_7 = _Result___init__impl__xyqfz8(createFailure(exception_4));
                } else {
                  throw $p;
                }
              }
            }
          }
        }
      }
    }
    tmp = tmp_7;
  }
  var tmp$ret$18 = tmp;
  return new Result(tmp$ret$18);
}
function createDefaultHttpClient$lambda($this$HttpClient) {
  $this$HttpClient.b2v_1 = true;
  var tmp = get_UserAgent();
  $this$HttpClient.q2v(tmp, createDefaultHttpClient$lambda$lambda);
  var tmp_0 = get_ContentNegotiation();
  $this$HttpClient.q2v(tmp_0, createDefaultHttpClient$lambda$lambda_0);
  var tmp_1 = get_HttpTimeout();
  $this$HttpClient.q2v(tmp_1, createDefaultHttpClient$lambda$lambda_1);
  return Unit_instance;
}
function createDefaultHttpClient$lambda$lambda($this$install) {
  $this$install.b36_1 = 'drand-kotlin-client-0.1.0';
  return Unit_instance;
}
function createDefaultHttpClient$lambda$lambda_0($this$install) {
  json($this$install, Json(VOID, createDefaultHttpClient$lambda$lambda$lambda));
  return Unit_instance;
}
function createDefaultHttpClient$lambda$lambda$lambda($this$Json) {
  $this$Json.i3d_1 = true;
  $this$Json.p3d_1 = false;
  return Unit_instance;
}
function createDefaultHttpClient$lambda$lambda_1($this$install) {
  $this$install.o35(new Long(30000, 0));
  $this$install.p35(new Long(10000, 0));
  $this$install.q35(new Long(10000, 0));
  return Unit_instance;
}
var Companion_instance_1;
function Companion_getInstance_2() {
  return Companion_instance_1;
}
var $serializer_instance;
function $serializer_getInstance() {
  if ($serializer_instance === VOID)
    new $serializer();
  return $serializer_instance;
}
function computeRandomness($this) {
  var sigBytes = hexToByteArray($this.o3o_1);
  var randomnessBytes = sha256(sigBytes);
  return toHexString(randomnessBytes);
}
function isValidHex($this, _this__u8e3s4) {
  var tmp;
  // Inline function 'kotlin.text.isNotEmpty' call
  if (charSequenceLength(_this__u8e3s4) > 0) {
    // Inline function 'kotlin.text.matches' call
    tmp = Regex.gg('^[0-9a-fA-F]+$').hg(_this__u8e3s4);
  } else {
    tmp = false;
  }
  return tmp;
}
var Companion_instance_2;
function Companion_getInstance_3() {
  return Companion_instance_2;
}
var $serializer_instance_0;
function $serializer_getInstance_0() {
  if ($serializer_instance_0 === VOID)
    new $serializer_0();
  return $serializer_instance_0;
}
function RandomnessBeacon$_get_derivedRandomness_$ref_vb060t() {
  return (p0) => p0.j3t();
}
function RandomnessBeacon$_init_$lambda_4xj6ml(this$0) {
  return () => {
    var tmp0_elvis_lhs = this$0.n3o_1;
    return tmp0_elvis_lhs == null ? computeRandomness(this$0) : tmp0_elvis_lhs;
  };
}
function *_generator_put__cb93wb($this, key, value, $completion) {
  // Inline function 'kotlinx.coroutines.sync.withLock' call
  var this_0 = $this.g3q_1;
  var tmp = this_0.i1c(null, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  try {
    $this.f3q_1 = plus($this.f3q_1, to(key, value));
  }finally {
    this_0.t1b(null);
  }
  return Unit_instance;
}
function *_generator_invoke__zhh2q8($this, $this$promise, $completion) {
  var tmp = $this.e3u_1.d3u_1.m3q($this.f3u_1, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  // Inline function 'kotlin.getOrThrow' call
  var this_0 = tmp.bo_1;
  throwOnFailure(this_0);
  var tmp_0 = _Result___get_value__impl__bjfvqg(this_0);
  var beacon = (tmp_0 == null ? true : !(tmp_0 == null)) ? tmp_0 : THROW_CCE();
  return new Beacon(toNumber(beacon.m3o_1), beacon.j3t(), beacon.o3o_1, beacon.p3o_1);
}
function *_generator_invoke__zhh2q8_0($this, $this$promise, $completion) {
  var tmp = $this.g3u_1.d3u_1.l3q($this.h3u_1, numberToLong($this.i3u_1), $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  // Inline function 'kotlin.getOrThrow' call
  var this_0 = tmp.bo_1;
  throwOnFailure(this_0);
  var tmp_0 = _Result___get_value__impl__bjfvqg(this_0);
  var beacon = (tmp_0 == null ? true : !(tmp_0 == null)) ? tmp_0 : THROW_CCE();
  return new Beacon(toNumber(beacon.m3o_1), beacon.j3t(), beacon.o3o_1, beacon.p3o_1);
}
function *_generator_invoke__zhh2q8_1($this, $this$promise, $completion) {
  var tmp = $this.j3u_1.d3u_1.b3q($this.k3u_1, $completion);
  if (tmp === get_COROUTINE_SUSPENDED())
    tmp = yield tmp;
  // Inline function 'kotlin.getOrThrow' call
  var this_0 = tmp.bo_1;
  throwOnFailure(this_0);
  var tmp_0 = _Result___get_value__impl__bjfvqg(this_0);
  var chainInfo = (tmp_0 == null ? true : !(tmp_0 == null)) ? tmp_0 : THROW_CCE();
  return new ChainInfo_0(chainInfo.z3o_1, toNumber(chainInfo.a3p_1), toNumber(chainInfo.b3p_1), chainInfo.c3p_1, chainInfo.d3p_1, chainInfo.e3p_1, chainInfo.f3p_1);
}
function Client$getVerifiedLatestBeacon$slambda_0(this$0, $beaconId) {
  var i = new Client$getVerifiedLatestBeacon$slambda(this$0, $beaconId);
  var l = ($this$promise, $completion) => i.p1h($this$promise, $completion);
  l.$arity = 1;
  return l;
}
function Client$getVerifiedBeacon$slambda_0(this$0, $beaconId, $round) {
  var i = new Client$getVerifiedBeacon$slambda(this$0, $beaconId, $round);
  var l = ($this$promise, $completion) => i.p1h($this$promise, $completion);
  l.$arity = 1;
  return l;
}
function Client$getChainInfo$slambda_0(this$0, $beaconId) {
  var i = new Client$getChainInfo$slambda(this$0, $beaconId);
  var l = ($this$promise, $completion) => i.p1h($this$promise, $completion);
  l.$arity = 1;
  return l;
}
function sha256(data) {
  var result = Sha256Module.sha256(toUint8Array(data));
  return toByteArray_0(result);
}
function keccak256(data) {
  var result = Keccak256Module.keccak_256(toUint8Array(data));
  return toByteArray_0(result);
}
function verifyBLS12381OnG2(publicKey, message, signature, dst) {
  var scheme = Bls12381Module.bls12_381.longSignatures;
  var hashedMessage = scheme.hash(toUint8Array(message), dst);
  return scheme.verify(toUint8Array(signature), hashedMessage, toUint8Array(publicKey));
}
function verifyBLS12381OnG1(publicKey, message, signature, dst) {
  var scheme = Bls12381Module.bls12_381.shortSignatures;
  var hashedMessage = scheme.hash(toUint8Array(message), dst);
  return scheme.verify(toUint8Array(signature), hashedMessage, toUint8Array(publicKey));
}
function verifyBLSBN254OnG1(publicKey, message, signature, dst) {
  throw NotImplementedError.hc('BN254 verification not yet implemented on Javascript');
}
function toUint8Array(_this__u8e3s4) {
  var array = _this__u8e3s4;
  // Inline function 'kotlin.js.unsafeCast' call
  return new Uint8Array(array);
}
function toByteArray_0(_this__u8e3s4) {
  var array = _this__u8e3s4;
  // Inline function 'kotlin.js.unsafeCast' call
  return new Int8Array(array);
}
//region block: post-declaration
initMetadataForClass(BeaconVerificationService, 'BeaconVerificationService', BeaconVerificationService);
initMetadataForClass(DrandClient, 'DrandClient', DrandClient.k3q, VOID, [AutoCloseable], [2, 1]);
initMetadataForClass(DrandError, 'DrandError');
initMetadataForClass(NotFound, 'NotFound', NotFound.q3q);
initMetadataForClass(InvalidRequest, 'InvalidRequest');
initMetadataForClass(RateLimited, 'RateLimited');
initMetadataForClass(ServerError, 'ServerError');
initMetadataForClass(NetworkError, 'NetworkError', NetworkError.o3r);
initMetadataForClass(ParseError, 'ParseError', ParseError.t3r);
initMetadataForClass(VerificationFailed, 'VerificationFailed', VerificationFailed.t3p);
initMetadataForClass(InvalidBeacon, 'InvalidBeacon');
initMetadataForClass(UnknownError, 'UnknownError');
initMetadataForClass(Curve, 'Curve');
initMetadataForClass(Group, 'Group');
initMetadataForClass(HashToCurve, 'HashToCurve');
initMetadataForObject(BLS12381_G2, 'BLS12381_G2');
initMetadataForObject(BLS12381_G1_RFC9380, 'BLS12381_G1_RFC9380');
initMetadataForObject(BN254_G1, 'BN254_G1');
initMetadataForClass(HashFunction, 'HashFunction');
initMetadataForClass(Scheme, 'Scheme');
initMetadataForObject(BLS12381G2Chained, 'BLS12381G2Chained');
initMetadataForObject(BLS12381G2Unchained, 'BLS12381G2Unchained');
initMetadataForObject(BLS12381G1UnchainedRFC9380, 'BLS12381G1UnchainedRFC9380');
initMetadataForObject(BN254G1Unchained, 'BN254G1Unchained');
initMetadataForCompanion(Companion);
initMetadataForClass(ByteOrder, 'ByteOrder');
initMetadataForClass(DrandHttpApi$beacons$1, VOID, VOID, VOID, VOID, [1, 2, 0]);
initMetadataForClass(DrandHttpApi$chains$1, VOID, VOID, VOID, VOID, [1, 2, 0]);
initMetadataForClass(DrandHttpApi, 'DrandHttpApi', DrandHttpApi, VOID, [AutoCloseable], [1]);
initMetadataForCompanion(Companion_0);
protoOf($serializer).r1v = typeParametersSerializers;
initMetadataForObject($serializer, '$serializer', VOID, VOID, [GeneratedSerializer]);
initMetadataForClass(ChainInfo, 'ChainInfo', VOID, VOID, VOID, VOID, VOID, {0: $serializer_getInstance});
initMetadataForCompanion(Companion_1);
protoOf($serializer_0).r1v = typeParametersSerializers;
initMetadataForObject($serializer_0, '$serializer', VOID, VOID, [GeneratedSerializer]);
initMetadataForClass(RandomnessBeacon, 'RandomnessBeacon', VOID, VOID, VOID, VOID, VOID, {0: $serializer_getInstance_0});
initMetadataForClass(Cache, 'Cache', Cache, VOID, VOID, [2, 1, 0]);
initMetadataForClass(Beacon, 'Beacon');
initMetadataForClass(ChainInfo_0, 'ChainInfo');
initMetadataForLambda(Client$getVerifiedLatestBeacon$slambda, VOID, VOID, [1]);
initMetadataForLambda(Client$getVerifiedBeacon$slambda, VOID, VOID, [1]);
initMetadataForLambda(Client$getChainInfo$slambda, VOID, VOID, [1]);
initMetadataForClass(Client, 'Client', Client);
//endregion
//region block: init
Companion_instance_0 = new Companion();
Companion_instance_1 = new Companion_0();
Companion_instance_2 = new Companion_1();
//endregion
//region block: exports
export {
  Beacon as Beacon,
  ChainInfo_0 as ChainInfo,
  Client as Client,
};
//endregion

//# sourceMappingURL=drand-client.mjs.map
